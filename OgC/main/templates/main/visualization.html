{% load static %}
<!DOCTYPE html>

<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <style type="text/css">
      /* Hyperlinks at top */
      .hyperlinks {
        float: right; 
        margin-top: 20px;     
      }

      /* OGC LOGO */
      .OGC {
        float:left;    
      }   

      /* Headings at top */     
      ul#headings a {
        display: inline; 
        margin-right: 40px;
      }

      /* Break Lines */
      hr {
        width: 100%;
        height: 5px;
        margin-left: auto;
        margin-right: auto;
        background-color: #7C7C7C;
        border: 0 none;
      }

      /* Top Row of Table */
      th {
        background-color: #2179AB;
        color:white;
      }

      /* Rows in the Table */
      th, td {
        text-align: center;
        border: 1px solid black;
        padding: 15px;
      }

      /* Table */
      table {
        border: 2px solid black;
        width: 44%;
        float: left;
        margin-left: 3%;
      }

      /* Less Space between lines of text */
      p.small {
        font-size: 40px;
        line-height: 0.3;
      }
      p.box_titles {
        line-height: 1;
        color: white; 
        font-size: 40px; 
        text-align: center;
      }

      /* Implied Volatility Box */
      #volatility {
        border: 3px solid gray;
        border-radius: 25px;
        background:#2179AB;
        width: 44%;
        float: right;
        margin-right: 3%;
        padding: 20px;
      }

      /* Stock Info Box */
      #stock_info {
        border: 3px solid gray;
        border-radius: 25px;
        background:#2179AB;
        width: 44%;
        float: left;
        margin-left: 3%;
        padding: 30px;
      }

      /* Evaulate Opportunities Box */
      #eval_opp {
        border: 3px solid gray;
        border-radius: 25px;
        background:#2179AB;
        width: 44%;
        float: right;
        margin-right: 3%;
        padding: 20px;
      }

      .gauge__body {
        width: 100%;
        height: 0;
        padding-bottom: 50%;
        background: #b4c0be;
        position: relative;
        border-top-left-radius: 100% 200%;
        border-top-right-radius: 100% 200%;
        overflow: hidden;
      }
      .gauge__fill {
        position: absolute;
        top: 100%;
        left: 0;
        width: inherit;
        height: 100%;
        background: mediumturquoise;
        transform-origin: center top;
        transform: rotate(0.25turn);
        transition: transform 0.2s ease-out;
    }
      .gauge__cover {
        width: 75%;
        height: 150%;
        background: #ffffff;
        border-radius: 50%;
        position: absolute;
        top: 25%;
        left: 50%;
        transform: translateX(-50%);
      /* Text */
        display: flex;
        align-items: center;
        justify-content: center;
        padding-bottom: 25%;
        box-sizing: border-box;
      }
    </style>
  </head>

  <body style="background-color:#1F2B4A">
    <!-- List of hyperlinks at top of page -->
    <ul id="headings">
      <!-- OgC Logo Button -->
      <a class = "OGC" href='http://127.0.0.1:8000/'>
        <img src="{% static 'images/logo.png' %}" alt="Home" width="150" height="106">
      </a>

      <!--Hyperlinks-->
      <div class="hyperlinks">
        <a href='http://127.0.0.1:8000/' style="font-size: 30px">Home</a>
        <a href="help" style="font-size: 30px">Help</a></li>
        <a href='about_us' style="font-size: 30px">About Us</a>
        <a href="contact" style="font-size: 30px">Contact</a>
        <a href="login" style="font-size: 30px">Login</a></span></p>
      </div>
    </ul>

    <!-- Dividing Line --> 
    <hr style="clear:both"/>

    <!-- Stock Name --> 
    <h1 class="display-4" style="color:MediumTurquoise"><center><u>{{stock}} ({{name}})</u></center></h1>
    <br>

    <!-- Options Table -->
    <table class="table-striped table-dark">
      <!-- Categories of Options Table (Top Row)-->
      <thead class="categories">
        <tr>
          <th>Type of Option</th>
          <th>Expiration Date</th>
          <th>Strike Price</th>
          <th>Last Price</th>
          <th>Implied Volatility</th>
        </tr>
      </thead>

      <!-- Information of Options Table -->
      <tbody>
        <!-- Row 1 -->
        <tr>
          <td>Call</td>
          <td>2020-10-21</td>
          <td>115</td>
          <td>0.80</td>
          <td>0.80</td>
        </tr>
        <!-- Row 2 -->
          <tr>
            <td>Call</td>
            <td>2020-10-21</td>
            <td>112</td>
            <td>0.05</td>
            <td>0.05</td>
          </tr>
        <!-- Row 3 -->
        <tr>
          <td>Call</td>
          <td>2020-10-21</td>
          <td>120</td>
          <td>0.40</td>
          <td>0.40</td>
        </tr>
        <!-- Row 4 -->
        <tr>
          <td>Call</td>
          <td>2020-10-21</td>
          <td>95</td>
          <td>0.20</td>
          <td>0.20</td>
        </tr>
        <!-- Row 5 -->
          <tr>
          <td>Put</td>
          <td>2020-10-21</td>
          <td>115</td>
          <td>0.80</td>
          <td>0.80</td>
        </tr>
        <!-- Row 6 -->
        <tr>
          <td>Put</td>
          <td>2020-10-21</td>
          <td>112</td>
          <td>0.05</td>
          <td>0.05</td>
        </tr>
        <!-- Row 7 -->
        <tr>
          <td>Put</td>
          <td>2020-10-21</td>
          <td>120</td>
          <td>0.40</td>
          <td>0.40</td>
        </tr>
      </tbody>
    </table>

    <!-- Implied Volatility -->
    <div id="volatility">
      <!-- Implied Volatility Value and Description -->
      <p class = "small" style="color: white; font-size: 40px; text-align:center">0.80</p>
      <p style="color: white; font-size: 15px; text-align:center">The implied volatility is very high for this stock, and one might not want to invest in it.</p>
      <br>

      <!-- Delta and Theta-->
        <div style="font-size: 40px; float:left; margin-left: 20%; margin-right: 20%; text-align:center">
          <p class="small" style="color:white">δ</p>
          <p style="color:#C8C8C8">0.7</p> 
          <p class="small" style="color:white">ν</p>
          <p style="color:#C8C8C8">1.0</p> 
        </div>

      <!-- Rho and Vega -->
      <div style="font-size: 40px; float:right; margin-right: 20%; text-align:center">   
        <p class="small" style="color:white">ρ</p> 
        <p style="color:#C8C8C8">0</p> 
        <p class="small" style="color:white">ν</p>
        <p style="color:#C8C8C8">0.4</p> 
      </div>

      <br><br><br><br><br><br><br><br><br>

      <!-- Gamma -->
      <div style="font-size: 40px">   
        <center><p class="small" style="color:white">γ</p></center>
        <center><p style="color:#C8C8C8">0.2</p></center>
      </div>
    </div>

    <br style="clear:both"/><br>
    <!-- Stock Price Chart -->
    <div id="price_chart" style="text-align:center">
      <img src="{% static 'images/google.png' %}" alt="Stock" width=70%>
    </div>

    <br>

    <!-- The Stock Info Box -->
    <div id="stock_info">
      <p class="box_titles">Render Key Stock Data.</p>
      <p style="color:white; font-size: 30px">Current Price</p>
      <p style="color:white; font-size: 30px">Day's Range</p>
      <p style="color:white; font-size: 30px">52 Week Range</p>
      <p style="color:white; font-size: 30px">Volume</p>
      <p style="color:white; font-size: 30px">EPS</p>
      <p style="color:white; font-size: 30px">Market Cap</p>
      <p style="color:white; font-size: 30px">Industry</p>
    </div>

    <!-- Technical Analysis Box -->
    <div id="eval_opp">
      <p class="box_titles">Evaluate Opportunities for {{stock}} </p>
      <p style="color:white; font-size: 15px; text-align:center">Based on these indicators -- RSI, Money Flow Index, Put-Call Ratio</p>
      <p style="color: white; font-size: 15px; text-align:center">RSI value > 70 = overbought, < 30 = oversold <br /> MFI > 80 = overbought, < 20 = oversold <br /> PCR > 1 (more puts than calls), PCR < 1 (more calls than puts)  </p>
      <p style="color: white; font-size: 10px; text-align:center">Info from Investopedia</p>
      <div class="gauge">
        <div class="gauge__body">
          <div class="gauge__fill"></div>
          <div class="gauge__cover"></div>
        </div>
    </div>

    <script>
      const gaugeElement = document.querySelector(".gauge");

      function setGaugeValue(gauge, value) {
          if (value < 0 || value > 1) {
              return;
          }
          //hypothetical good value --> <=0.5
          //hypothetical bad value --> >=0.6
          if (value <= 0.5) {
            gauge.querySelector(".gauge__cover").textContent = `${Math.round(value * 100)}% is a good value for this option`;
          } else if (value >= 0.6) {
            gauge.querySelector(".gauge__cover").textContent = `${Math.round(value * 100)}% is a bad value for this option`;
          }

          gauge.querySelector(".gauge__fill").style.transform = `rotate(${value / 2}turn)`;
          //gauge.querySelector(".gauge__cover").textContent = `${Math.round(value * 100)}%`;
      }

      setGaugeValue(gaugeElement, 0.9); //instead of setting as a constant number, pull in from backend


    </script>
    </body>
</html>


